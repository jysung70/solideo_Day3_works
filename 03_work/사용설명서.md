# 데이터 포맷 변환기 사용설명서

## 1. 소개
브라우저에서 바로 실행되는 단일 페이지 웹 앱으로 CSV와 JSON 데이터를 양방향으로 변환합니다. 한글(UTF-8) 인코딩, 중첩 구조, 자동 타입 감지, 통계 표시 등 데이터 핸들링 과정에서 필요한 편의 기능을 제공합니다.

## 2. 구성 파일
- `index.html`: 전체 레이아웃과 입력/출력 영역, 모드 전환 버튼, 옵션 등을 정의합니다.
- `style.css`: 그라데이션 테마, 반응형 레이아웃, 버튼/정보 박스 스타일을 포함합니다.
- `script.js`: 파일 업로드, 변환 로직, 옵션 처리, 통계 계산, 복사·다운로드 기능을 담당합니다.
- `government_data.csv`: 기본으로 제공되는 행정 데이터 샘플입니다. CSV → JSON 예제와 동일한 구조입니다.
- `화면 캡처.png`: 완성 화면을 참고할 수 있는 스크린샷입니다.

## 3. 실행 방법
1. `index.html`을 더블 클릭하거나 로컬 서버(예: VS Code Live Server)로 실행합니다.
2. 브라우저는 최신 Chrome/Edge/Safari를 권장합니다. 모든 변환은 클라이언트에서 수행되므로 추가 설치가 필요 없습니다.

## 4. 화면 구성 요약
- **모드 선택**: `CSV → JSON`, `JSON → CSV` 두 버튼이 있으며 선택한 모드는 파란색으로 강조됩니다.
- **입력 영역**: 파일 선택, 샘플 데이터, 초기화 버튼과 입력용 텍스트 영역 및 상태 정보(`입력 대기 중...`)가 있습니다.
- **옵션 섹션**: Pretty Print, 헤더 포함, 중첩 구조, 자동 타입 감지 체크박스와 구분자 드롭다운을 제공합니다.
- **변환 버튼**: "🔄 변환하기" 버튼을 클릭하면 현재 모드와 옵션에 맞게 데이터를 처리합니다.
- **출력 영역**: 결과 텍스트 영역, 복사/다운로드 버튼, 상태 정보(`변환 대기 중...`)가 표시됩니다.
- **통계 패널**: 처리 시간, 행 수, 컬럼 수, 데이터 크기가 변환이 성공할 때마다 표시됩니다.

## 5. 사용 절차
### 5.1 CSV → JSON
1. 상단 모드에서 `CSV → JSON`을 선택합니다.
2. 입력 방법을 선택합니다.
   - `📁 파일 선택`: CSV 파일을 업로드하면 내용이 자동으로 입력됩니다.
   - `📝 샘플 데이터`: `government_data.csv`와 동일한 샘플이 채워집니다.
   - 직접 텍스트 영역에 붙여넣을 수도 있습니다.
3. 필요 시 옵션을 조정합니다.
4. `🔄 변환하기` 버튼을 눌러 결과를 확인합니다.
5. 결과는 JSON 배열 문자열로 표시되며, `📋 복사` 또는 `💾 다운로드`를 통해 활용할 수 있습니다.

### 5.2 JSON → CSV
1. 모드를 `JSON → CSV`로 전환하면 파일 확장자 허용이 `.json`으로 변경됩니다.
2. JSON 배열 또는 단일 객체를 입력합니다. 배열이 아니어도 내부적으로 배열에 담아 처리합니다.
3. 옵션을 설정한 뒤 `🔄 변환하기`를 누르면 CSV 문자열이 출력됩니다.
4. 헤더 포함 여부, 구분자, 중첩 구조 평탄화 여부를 필요에 맞게 조정합니다.

## 6. 변환 옵션 설명
| 옵션 | 설명 | 기본값 |
| --- | --- | --- |
| JSON 포맷팅 (들여쓰기) | CSV → JSON 변환 시 `JSON.stringify`에 들여쓰기 2칸을 적용합니다. | 사용 |
| CSV 헤더 포함 | JSON → CSV 변환 시 첫 행에 헤더를 출력합니다. | 사용 |
| 중첩 구조 지원 | CSV에서는 `address.city` 형태의 점 표기법을 중첩 객체로 변환하고, JSON에서는 객체를 평탄화합니다. | 사용 |
| 자동 타입 감지 | 숫자, 실수, `true/false`, `null` 문자열을 실제 타입으로 변환합니다. | 사용 |
| CSV 구분자 | 기본 쉼표 외에 세미콜론, 탭, 파이프를 선택할 수 있습니다. | 쉼표 |

## 7. 파일/결과 관리
- **입력 초기화**: `🗑️ 초기화` 버튼으로 입력, 출력, 파일 선택 상태를 모두 비엽니다.
- **복사**: 결과 영역이 채워진 상태에서 `📋 복사`를 누르면 클립보드로 복사되며 2초간 안내 메시지가 나타납니다.
- **다운로드**: `💾 다운로드`는 현재 모드에 따라 `.json` 또는 `.csv` 파일을 생성합니다. UTF-8 BOM을 추가해 엑셀 한글 호환성을 확보합니다.
- **상태/통계 확인**: 변환 성공 시 처리 시간, 행·열 수, 결과 크기가 통계 카드에 표시되고, 정보 박스가 녹색으로 바뀝니다.

## 8. 오류 및 해결 팁
- **입력 데이터 없음**: 변환 버튼 클릭 시 입력이 비어 있으면 오류 메시지가 표시됩니다.
- **CSV 열 불일치**: 어떤 행의 컬럼 수가 헤더와 다르면 콘솔 경고가 발생하므로 데이터 정합성을 점검하세요.
- **잘못된 JSON**: JSON 파싱 실패 시 "유효하지 않은 JSON 형식" 오류가 표시됩니다. 브라우저 콘솔에서도 자세한 메시지를 확인하세요.
- **빈 JSON 배열**: 요소가 없으면 변환이 중단되므로 최소 1개의 객체가 필요합니다.
- **대용량 데이터**: 전부 브라우저 메모리에서 처리되므로 수십 MB 이상의 파일은 브라우저가 응답하지 않을 수 있습니다.

## 9. 기술 참고
- 모든 연산은 로컬에서 수행되며 서버에 데이터가 전송되지 않습니다.
- 입력 파일은 UTF-8로 읽으며, 다른 인코딩은 깨질 수 있습니다.
- 다운로드 파일 이름은 `converted_<timestamp>.csv/json` 규칙을 따릅니다.
- 빌드나 패키지 설치 과정이 필요 없으므로 파일만 배포하면 다른 사용자도 동일하게 사용할 수 있습니다.
