# 직원 JSON 검증 도구 사용설명서

## 1. 도구 개요
- `validator.py`는 인사 데이터를 담은 JSON 파일을 정적 규칙에 따라 검증합니다.
- 구조, 필수 필드, 값 형식, 범위 등을 확인하여 오류를 친절한 한국어 메시지로 출력합니다.
- 성공 시 `OK: 모든 검증을 통과했습니다.`를, 실패 시 오류 개수와 상세 목록을 제공합니다.

## 2. 사전 준비
- Python 3.10 이상이 설치되어 있어야 합니다.
- 검증 대상 JSON 파일을 프로젝트 루트(또는 실행 디렉터리)에 둡니다.
- 기본 파일명은 `validation_data.json`이며, 다른 파일명을 사용하려면 실행 시 인자로 전달합니다.

## 3. JSON 데이터 구조
| 루트 키 | 타입 | 설명 |
| --- | --- | --- |
| `employees` | 배열 | 각 직원 객체 집합. 필수. |
| `departments` | 배열 | 사용 가능한 부서명 목록. 직원 `department` 검증에 활용. |
| `salary_range` | 객체 | `min`, `max` 숫자 값으로 급여 허용 범위 정의. |

### employees 항목
| 필드 | 타입 | 규칙 |
| --- | --- | --- |
| `id` | 문자열 | 공백 없는 ID, 전체 employees 내에서 중복 불가. |
| `name` | 문자열 | 비어 있지 않아야 함. |
| `email` | 문자열 | RFC 형식(예: user@example.com)이어야 하며 중복 불가. |
| `phone` | 문자열 | `010-1234-5678` 패턴을 따라야 함. |
| `department` | 문자열 | `departments` 목록 중 하나여야 함. |
| `salary` | 숫자 | `salary_range.min` 이상, `salary_range.max` 이하의 값. |

## 4. 실행 방법
```bash
# 기본 파일(validation_data.json) 검증
python3 validator.py

# 다른 경로나 파일을 검증
python3 validator.py path/to/your_data.json
```
- Windows PowerShell에서 실행할 경우 `python` 명령을 사용해도 됩니다.
- 검증 중 발생한 모든 오류는 표준 출력에 순서대로 표시됩니다.

## 5. 검증 규칙 요약
1. 루트에 `employees`, `departments`, `salary_range` 3개 키가 존재해야 합니다.
2. `salary_range.min < salary_range.max`이며 두 값은 숫자 타입이어야 합니다.
3. 직원별 필수 필드가 모두 존재하고 지정된 정규식/타입을 만족해야 합니다.
4. 모든 직원 ID, 이메일은 전역에서 중복될 수 없습니다.
5. 급여는 숫자이며 범위 안에 들어야 합니다.

## 6. 출력 해석
- **성공**: `OK: 모든 검증을 통과했습니다.`
- **실패**: `FAIL: 총 N건의 오류가 발견되었습니다:` 이후 각 오류는
  - `- [위치] 필드: 메시지` 형식으로 표현되고,
  - 필요 시 `-> 제안: ...` 라인이 따라오며 수정 방법을 안내합니다.

## 7. 오류 대응 예시
| 상황 | 메시지 예시 | 조치 |
| --- | --- | --- |
| 필수 키 누락 | `root employees: 필수 키가 없습니다.` | 루트에 `employees` 배열 추가. |
| 부서명 오류 | `employees[2]/EMP003 department: 정의되지 않은 부서입니다.` | `departments`에 해당 부서를 추가하거나 직원 값을 수정. |
| 급여 범위 위반 | `salary_range min/max: min 값은 max 보다 작아야 합니다.` | `salary_range` 값을 재설정. |
| 이메일 중복 | `employees email: 이메일 'foo@bar.com'가 2회 중복되었습니다.` | 해당 직원들의 이메일을 유니크하게 변경. |

## 8. 팁 및 모범 사례
- JSON을 편집할 때는 VS Code, jq 등으로 포맷을 유지하세요.
- 대량 수정 전에는 스키마에 맞는 예제 데이터를 준비해 비교하세요.
- 검증 실패 시 메시지에 제공되는 제안을 먼저 적용하고 다시 실행해 보세요.
